(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{122:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(6),o=a.n(r),s=(a(87),a(68)),l=a(10),i=a(23),u=a(159),m=a(153),f=a(72),p=a.n(f)()("https://learning-socket-io-server.herokuapp.com"),d=a(149),g=a(45),b=function(e){var t=e.mainText,a=e.secondaryText;return c.a.createElement(d.a,{container:!0,justify:"space-between",alignItems:"flex-end"},c.a.createElement(g.a,{component:"h2",variant:"h5",color:"primary"},t),c.a.createElement(g.a,{color:"textSecondary"},a))},h=a(158),E=a(74),v=a.n(E),y=a(154),x=a(155),j=a(156),O=a(163),k=a(157),N=Object(m.a)((function(e){return{itemRight:{display:"flex",justifyContent:"flex-end"},textRight:{flex:"0 1 auto",borderRadius:"25px",backgroundColor:e.palette.info.light,color:e.palette.background.paper,padding:"3px 10px 3px 10px"},itemCenter:{display:"flex",justifyContent:"center"},textCenter:{flex:"0 1 auto",color:e.palette.secondary.light}}})),C=function(e){var t=e.classes,a=e.message;return c.a.createElement(y.a,{className:t.itemRight},c.a.createElement(x.a,{className:t.textRight,primary:a.body}))},w=function(e){var t=e.classes,a=e.message;return c.a.createElement(y.a,{className:t.itemCenter},c.a.createElement(x.a,{className:t.textCenter,primary:a.body}))},S=function(e){var t=e.message,a=e.currentUser,n=N(),r="notification"===t.type,o=t.user.id===a.id;return r?c.a.createElement(w,{classes:n,message:t}):o?c.a.createElement(C,{classes:n,message:t}):c.a.createElement(y.a,null,c.a.createElement(j.a,null,c.a.createElement(O.a,null,t.user.nickname.charAt(0).toUpperCase())),c.a.createElement(x.a,{primary:t.body,secondary:t.user.nickname}),c.a.createElement(k.a,null,c.a.createElement(g.a,{component:"p",variant:"body2",color:"textSecondary"},v()(t.date).format("h:mm a"))))},U=Object(m.a)((function(e){return{root:{height:"100vh",overflowY:"scroll",margin:"10px 0 10px 0",backgroundColor:e.palette.background.paper}}})),D=function(e){var t=e.messages,a=e.currentUser,r=U(),o=Object(n.useRef)(null);return Object(n.useEffect)((function(){o.current.scrollIntoView({behavior:"smooth"})}),[t]),c.a.createElement(h.a,{dense:!0,className:r.root},t.map((function(e,t){return c.a.createElement(S,{message:e,currentUser:a,key:t})})),c.a.createElement("div",{ref:o}))},R=a(164),I=a(160),T=a(75),B=a.n(T),L=Object(m.a)((function(e){return{root:{display:"flex",alignItems:"center"},input:{marginLeft:e.spacing(2),flex:1},iconButton:{padding:10}}})),J=function(e){var t=e.sendMessage,a=Object(n.useState)(""),r=Object(i.a)(a,2),o=r[0],s=r[1],l=L();return c.a.createElement(u.a,{className:l.root,component:"form",elevation:2,onSubmit:function(e){e.preventDefault(),o&&(t(o),s(""))}},c.a.createElement(R.a,{autoComplete:"off",autoFocus:!0,className:l.input,name:"message",onChange:function(e){s(e.target.value)},placeholder:"Escriba aqu\xed...",value:o}),c.a.createElement(I.a,{type:"submit",className:l.iconButton,"aria-label":"search",color:"primary"},c.a.createElement(B.a,null)))},M=a(161),q=function(e){var t=e.sendNickname,a=Object(n.useState)(""),r=Object(i.a)(a,2),o=r[0],s=r[1];return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(o),s("")}},c.a.createElement(M.a,{autoComplete:"off",name:"nickname",onChange:function(e){s(e.target.value)},label:"Nickname...",value:o,variant:"outlined"}))},A=a(162),F=Object(m.a)((function(e){return{chat:{padding:e.spacing(2),display:"flex",flexDirection:"column",width:"400px",height:"600px"},login:{display:"flex",width:"400px",height:"600px",justifyContent:"center",alignItems:"center"}}}));var V=function(){var e=F(),t=Object(n.useState)({id:null,nickname:null}),a=Object(i.a)(t,2),r=a[0],o=a[1],m=Object(n.useState)([]),f=Object(i.a)(m,2),d=f[0],g=f[1],h=Object(n.useState)(0),E=Object(i.a)(h,2),v=E[0],y=E[1];return Object(n.useEffect)((function(){return p.on("message",(function(e){console.log("Lleg\xf3 mensaje..."),console.log(e),g([].concat(Object(l.a)(d),[e]))})),p.on("login",(function(e){var t=e.activeUsers,a=e.user;console.log("Login"),console.log(a),o(a),y(t)})),p.on("new user",(function(e){var t=e.activeUsers,a=e.user,n={body:"".concat(a.nickname," se ha unido"),date:new Date,type:"notification",user:a};y(t),g([].concat(Object(l.a)(d),[n]))})),p.on("left",(function(e){var t=e.activeUsers,a=e.user;if(a){var n={body:"".concat(a.nickname," ha salido"),date:new Date,type:"notification",user:a};g([].concat(Object(l.a)(d),[n]))}y(t)})),function(){p.off("left"),p.off("login"),p.off("message"),p.off("new user")}}),[d,r,v]),r.id?c.a.createElement(u.a,{className:e.chat},c.a.createElement(b,{mainText:"Notificador de mensajes",secondaryText:"".concat(v," ").concat(1!==v?"usuarios":"usuario")}),c.a.createElement(D,{messages:d,currentUser:r}),c.a.createElement(J,{sendMessage:function(e){var t={id:Object(A.a)(),body:e,date:new Date,type:"warning",user:r};g([].concat(Object(l.a)(d),[t])),p.emit("message",t)}})):c.a.createElement(u.a,{className:e.login},c.a.createElement(q,{className:e.login,sendNickname:function(e){var t=Object(s.a)({},r,{nickname:e});o(t),console.log("handleSetNickname"),console.log(t),p.emit("join",t)}}))};o.a.render(c.a.createElement(V,null),document.getElementById("root"))},82:function(e,t,a){e.exports=a(122)},87:function(e,t,a){}},[[82,1,2]]]);
//# sourceMappingURL=main.30eacda1.chunk.js.map